<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="X Project is a student activity established in 2012 at Cairo University, offering leadership, teamwork, and academic development.">
    <meta name="author" content="X Project">
    
    <meta property="og:title" content="X Project | Official Website">
    <meta property="og:description" content="Join X Project, the leading student activity at Cairo University since 2012.">
    <meta property="og:image" content="https://x-project.co/X-Project/img/logo.png">
    <meta property="og:url" content="https://x-project.co/X-Project/home.html">
    <meta property="og:type" content="website">

    <meta name="keywords" content="X Project, X project, x project, xproject, Xproject, XProject,Student Activity, Cairo University, Entrepreneurship, Leadership, University Events">

    <link rel="icon" href="../img/logo.png" type="image/png">
   
    <title>Validation Form</title>
    <link rel="stylesheet" href="style.css">
    
</head>

<body>
    <!-- start image -->
    <header>
        <img src="logo & Slogan.png" width="200px" alt="Header Image">
    </header>

    <!-- form -->
    <div class="Validation">
        <h1>Reservation</h1>
        <form class="form">
            <div class="form-group">
                <label for="date">Date:</label>
                <input type="date" name="date" required>
            </div>

            <div class="form-group">
                <label for="time">Session Time:</label>
                <input type="time" name="time" id="time" required>
            </div>

            <div class="form-group">
                <label for="location">Location:</label>
                <select id="location" name="location" required onchange="fillLatLng()">
                    <option value="">Select Location</option>
                    <option value="30.0341418825051,31.21104417301686">إبداع</option>
                    <option value="30.038753841654,31.2116382">رموز</option>
                    <option value="30.03489042273794,31.213646742327704">كرياتيفو</option>
                    <option value="30.034896310918594,31.212941101853016">مجال</option>
                    <option value="30.03660159639126,31.211401842327714">براح</option>
                </select>
            </div>

            

            <div class="form-group">
                <label for="day">Day:</label>
                <select name="day" required>
                    <option value="">Select day</option>
                    <option value="saturday">Saturday</option>
                    <option value="sunday">Sunday</option>
                    <option value="monday">Monday</option>
                    <option value="tuesday">Tuesday</option>
                    <option value="wednesday">Wednesday</option>
                    <option value="thursday">Thursday</option>
                    <option value="friday">Friday</option>
                </select>
            </div>

            <div class="form-group">
                <label for="committee">Committee or Team:</label>
                <select name="committee" id="committee" required>
                    <option value="">Select committee or team</option>
                    
                   
                    <option value="HR & QM">HR & QM</option>
                    <option value="PM">PM</option>
                    <option value="SR">SR</option>
                    <option value="FR">FR</option>
                    <option value="PR">PR</option>
                    <option value="Logistics">Logistics</option>
                    <option value="Marketing">Marketing</option>
                    <option value="Photography">Photography</option>
                    <option value="Graphic Design">Graphic Design</option>
                    <option value="Web Development">Web Development</option>
                    <option value="JR">JR</option>  
                    <option value="Team 1">Team 1</option>
                    <option value="Team 2">Team 2</option>
                    <option value="Team 3">Team 3</option>
                    <option value="Team 4">Team 4</option>
                    <option value="Team 5">Team 5</option>
                    <option value="Team 6">Team 6</option>
                    <option value="Team 7">Team 7</option>
                    <option value="Team 8">Team 8</option>
                    <option value="Team 9">Team 9</option>
                    <option value="Team 10">Team 10</option>
                </select>
            </div>
            
<input type="hidden" id="latitude" name="latitude">
<input type="hidden" id="longitude" name="longitude">
            <button type="submit" class="submit-btn">Submit</button>
        </form>
        
        <div id="popup" class="popup-overlay">
            <div class="popup-content">
                <p>Session saved successfully!</p>
                <button onclick="closePopup()">OK</button>
            </div>
        </div>
    </div>
    <!-- footer -->
    <footer>
        <p>&copy;2025 Web Development. All Rights Reserved.</p>
    </footer>

    <script>
        function fillLatLng() {
            const value = document.getElementById('location').value;
            if (value) {
                const [lat, lng] = value.split(',');
                document.getElementById('latitude').value = lat;
                document.getElementById('longitude').value = lng;
            }
        }
    
        function closePopup() {
            document.getElementById('popup').style.display = 'none';
        }
    
        document.querySelector('.form').addEventListener('submit', async function (e) {
            e.preventDefault();
    
            const data = {
                session_date: document.querySelector('[name="date"]').value,
                session_time: document.querySelector('[name="time"]').value,
                latitude: document.getElementById('latitude').value,
                longitude: document.getElementById('longitude').value,
                group_name: document.querySelector('[name="committee"]').value,
                google_maps_link: "https://maps.google.com/?q=" + document.getElementById('latitude').value + "," + document.getElementById('longitude').value
            };
    
            try {
                const response = await fetch("https://x-project.co/public/api/sessions", {
                    method: "POST",
                    headers: { "Content-Type": "application/json" },
                    body: JSON.stringify(data)
                });
    
                const result = await response.json();
                if (response.ok) {
                    document.getElementById('popup').style.display = 'flex';
                    document.querySelector('.form').reset();
                } else {
                    alert("Error: " + result.message);
                }
            } catch (err) {
                alert("Network error");
            }
        });
    </script>


</body>



</html>